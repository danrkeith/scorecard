@model UserViewModel
@{
    ViewData["Title"] = "Register";
}

@section Scripts
{
    <script>
        var filled, match;

        // Check all fields are filled
        $('.form-control').on('keyup paste', function () {
            filled = true;

            //Iterate through all inputs
            $('.form-control').each(function () {
                if ($(this).val() == '') {
                    // An input isn't filled
                    filled = false;
                }
            })

            match = $('#password').val() == $('#confirm').val();

            // Alert user if passwords don't match
            $('#warning').html(match ? '' : 'Passwords do not match');

            // Allow user to proceed if each field is filled
            $('#submit').prop('disabled', !(filled && match));
        });
    </script>
}

<form asp-controller="User" asp-action="Register" method="post" autocomplete="off">
    <div class="form-group">
        <label for="username">Username</label>
        <input asp-for="Username" id="username" class="form-control" autofocus />
    </div>
    <div class="form-group">
        <label for="password">Password</label>
        <input asp-for="Password" id="password" class="form-control" />
    </div>
    <div class="form-group">
        <label for="confirm">Confirm Password</label>
        <input asp-for="Confirm" id="confirm" class="form-control" />
        <span id="warning" class="text-danger"></span>
    </div>
    <div class="form-group">
        <input id="submit" type="submit" class="btn btn-primary" value="Register" disabled />
    </div>
</form>

@section Warning
{
    @if (ViewBag.Warning != null)
    {
        <div class="alert alert-warning">
            @ViewBag.Warning
        </div>
    }
}